<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Visibility Score - Test Your Website</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main content (always visible for guests and logged-in users) -->
    <div class="container" id="mainContent">
        <div class="header">
            <h1>AI Visibility Score</h1>
            <p>See how AI assistants find and recommend your website</p>
            
            <!-- User menu (populated by JavaScript if logged in) -->
            <div id="userMenu"></div>
        </div>

        <div class="main-content">
            <!-- Input Section -->
            <div class="input-section" id="inputSection">
                <h2>Get Your AI Readiness Score</h2>
                <p style="color: #666; margin-bottom: 30px;">
                    Enter your website URL for instant analysis
                </p>
                
                <form class="url-form" id="urlForm">
                    <input 
                        type="url" 
                        class="url-input" 
                        id="websiteUrl" 
                        placeholder="https://yourcompany.com"
                        required
                    >
                    <button type="submit" class="analyze-btn" id="analyzeBtn">
                        Analyze My Website
                    </button>
                </form>
                
                <p class="disclaimer">
                    ‚úì Score out of 1000 ‚úì 8 pillar breakdown ‚úì Instant results
                </p>
            </div>

            <!-- Loading Section -->
            <div class="loading" id="loadingSection">
                <div class="loading-spinner"></div>
                <div class="loading-text" id="loadingText">Analyzing your website...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p style="color: #666; margin-top: 20px;">This may take 30-60 seconds</p>
            </div>

            <!-- Error Section -->
            <div class="error-section" id="errorSection">
                <h3>‚ö†Ô∏è Analysis Error</h3>
                <p id="errorMessage">Unable to analyze the website. Please check the URL and try again.</p>
                <button class="analyze-btn" onclick="resetForm()">Try Again</button>
            </div>

            <!-- Results Section -->
            <div class="results" id="resultsSection">
                <!-- Industry Detection -->
                <div class="industry-detection" id="industryDetection">
                    <h3>üìä Website Analysis</h3>
                    <p style="font-size: 1.2rem; font-weight: 600; color: #00B9DA; margin: 10px 0;">
                        <span id="detectedIndustry">Loading...</span>
                    </p>
                    <p id="websiteStats" style="color: #666; font-size: 0.9rem;"></p>
                </div>

                <!-- Score Header -->
                <div class="score-header">
                    <div class="score-circle" id="scoreCircle">
                        <span id="totalScore">0</span><span style="font-size: 1.5rem;">/1000</span>
                    </div>
                    <h2 id="scoreTitle">Your AI Visibility Score</h2>
                    <p id="scoreDescription">Loading results...</p>
                </div>

                <!-- 8 Pillar Category Breakdown -->
                <div class="score-categories" id="scoreCategories">
                    <!-- Populated by JavaScript -->
                </div>

                <!-- Page Count Info (for multi-page scans) -->
                <div id="pageCountInfo" style="display: none; text-align: center; padding: 20px; background: #f8f9fa; border-radius: 15px; margin: 30px 0;">
                    <h4>üìÑ Pages Analyzed</h4>
                    <p id="pageCountText" style="color: #666; margin-top: 10px;"></p>
                </div>

                <!-- Recommendations -->
                <div class="recommendations">
                    <h3>üéØ Priority Improvements</h3>
                    <p style="color: #666; margin-bottom: 20px;">
                        Top recommendations to improve your AI visibility
                    </p>
                    <div class="quick-wins" id="quickWins">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Upgrade CTA (shown based on user plan) -->
                <div id="upgradeCTA"></div>

                <!-- Analysis Details (Collapsible) -->
                <details class="analysis-details" style="margin-top: 30px;">
                    <summary style="cursor: pointer; font-weight: 600; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                        üîç View Detailed Breakdown
                    </summary>
                    <div id="analysisBreakdown" style="padding: 20px;"></div>
                </details>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Powered by AI Visibility Score | 
                <a href="auth.html" style="color: white; text-decoration: underline;">Sign In</a> | 
                <a href="checkout.html?plan=diy" style="color: white; text-decoration: underline;">Pricing</a>
            </p>
        </div>
    </div>

    <!-- Hidden Google Sheets Form (for lead capture) -->
    <iframe name="gsheet_silent_target" style="display:none;"></iframe>
    <form id="sheetForm" method="POST" 
          action="https://script.google.com/macros/s/AKfycby39Oc9Q_MhbFNTuV0telbuRC8ffb7Ts_TG2oaArxuDFxtW_w4tpjuab0x5YC4uBqjPew/exec" 
          target="gsheet_silent_target" 
          style="display:none;">
        <input type="hidden" name="website" id="sheet_website" />
        <input type="hidden" name="page_url" id="sheet_page_url" />
        <input type="hidden" name="user_agent" id="sheet_user_agent" />
        <input type="hidden" name="referrer" id="sheet_referrer" />
    </form>

    <script src="script.js"></script>
</body>
</html>